<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Origin Espresso â€“ Coffee Finder</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="t-bar">
  <nav class="nav-left" aria-label="Main">
    <a href="#about">About</a>
    <a href="#shop">Shop</a>
    <a href="#gifting">Gifting</a>
    <a href="#subscription">Subscription</a>
  </nav>
  <div class="logo" aria-hidden="true"><h1>â˜•</h1></div>
</header>

<!-- Dynamic greeting -->
<div id="greeting" class="greeting" aria-live="polite">Loading personalised greetingâ€¦</div>

<script>
// Dynamic greeting script (unchanged)
(async function() {
  const greetingEl = document.getElementById('greeting');
  let city = 'your city';
  try {
    const resp = await fetch('https://ipapi.co/json/');
    if (resp.ok) {
      const data = await resp.json();
      city = data.city || city;
    }
  } catch (e) {}
  const now = new Date();
  const hour = now.getHours();
  const localTime = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  const jokes = {
    decaf: [
      `Late in ${city}? Decaf's on â€” even your dreams need a good night's rest.`,
      `It's after 6pm in ${city}. Put the rocket fuel away â€” decaf latte time.`,
      `Even the moon in ${city} prefers decaf. You might too.`
    ],
    morning: [
      `Buongiorno ${city}! Italians say milk coffees are a morning-only negotiation â€” cappuccino before noon, always.`,
      `Good morning, ${city}. If you're feeling Italian, a milky cappuccino is socially acceptable before noon.`,
      `Morning in ${city} â€” milk coffee is breakfast diplomacy. Cappuccino? Go for it.`
    ],
    day: [
      `Hello ${city}! A balanced medium roast will keep you happy and slightly heroic.`,
      `It's ${localTime} in ${city}. Consider a bright filter roast to make spreadsheets taste better.`,
      `Hey ${city} â€” bold espresso for focused scenes, medium roast for friendly chats.`
    ]
  };
  let message = '';
  if (hour >= 18 || hour < 5) message = jokes.decaf[Math.floor(Math.random() * jokes.decaf.length)];
  else if (hour < 12) message = jokes.morning[Math.floor(Math.random() * jokes.morning.length)];
  else message = jokes.day[Math.floor(Math.random() * jokes.day.length)];

  let tip = '';
  if (hour < 12) tip = 'Tip: Italians generally avoid milk coffees after lunch â€” but you do you.';
  else if (hour >= 18) tip = `Tip: Try a decaf with warm milk â€” it's sneaky comfort.`;
  else tip = `Tip: Try matching roast to your brew method (V60 -> light; Espresso -> richer).`;

  greetingEl.innerHTML = `<strong>${message}</strong> <span class="greeting-tip">${tip}</span>`;
})();
</script>

<!-- HERO -->
<section class="hero">
  <img src="Assets/1_12_25Hero.jpg" alt="Pouring coffee" class="hero-gif" />
  <div class="hero-overlay" aria-hidden="true"></div>
  <div class="hero-text" role="region" aria-label="Hero">
    <h2>Time for a personalised experience</h2>
    <p class="lede">Curated Melbourne beans, tailored to your taste.</p>
    <a class="button" href="quiz.html">Start Quiz</a>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how-it-works" id="about">
  <h2>How it works</h2>

  <div class="hiw-assets">
    <div class="asset tile">
      <div class="asset-emoji">ğŸ“</div>
      <div class="asset-title">Take the Quiz</div>
      <div class="asset-sub">60 seconds to your taste profile</div>
    </div>

    <div class="asset tile">
      <div class="asset-emoji">âš™ï¸</div>
      <div class="asset-title">We build your profile</div>
      <div class="asset-sub">Rules + tasting science + behaviour</div>
    </div>

    <div class="asset tile">
      <div class="asset-emoji">ğŸ“¦</div>
      <div class="asset-title">Get your matches</div>
      <div class="asset-sub">Curated local beans, fresh from roasters</div>
    </div>
  </div>
</section>

<!-- PRODUCTS -->
<section class="products" id="shop" aria-label="Featured beans">
  <div class="products-inner">
    <h2>We think you'll love these</h2>
    <div class="product-carousel" role="region" aria-label="Product carousel">
      <button class="carousel-btn prev" aria-label="Previous slide">&#10094;</button>
      <div class="carousel-window">
        <div class="carousel-track">
          <div class="product"><img src="Assets/2_12_25_Product2.gif" alt="Espresso"><div class="overlay">Espresso Blend</div></div>
          <div class="product"><img src="Assets/2_12_25_Product3.gif" alt="Light Roast"><div class="overlay">Light Roasts</div></div>
          <div class="product"><img src="Assets/2_12_25_Product1.gif" alt="Medium Roast"><div class="overlay">Medium Roast</div></div>
          <div class="product"><img src="Assets/2_12_25_Product4.gif" alt="Dark Roast"><div class="overlay">Dark Roast</div></div>
          <div class="product"><img src="https://media.giphy.com/media/hPFKu8dKRRNgQ/giphy.gif" alt="Colombian"><div class="overlay">Colombian Beans</div></div>
          <div class="product"><img src="https://media.giphy.com/media/hPFKu8dKRRNgQ/giphy.gif" alt="Ethiopian"><div class="overlay">Ethiopian Beans</div></div>
        </div>
      </div>
      <button class="carousel-btn next" aria-label="Next slide">&#10095;</button>
    </div>
  </div>
</section>

<!-- WHY LOCAL -->
<section class="why-local">
  <h2>Why Melbourne-first matters</h2>
  <p>Freshly roasted beans, shorter supply chains, and direct support for local roasters.</p>
</section>

<!-- PARTNER -->
<section class="partner">
  <h2>Partner With Us</h2>
  <p>Reach the right customers with personalised coffee matching + automated journeys.</p>
  <a href="#" class="partner-btn">Learn More</a>
</section>

<footer>
  <p>&copy; 2025 Origin Espresso</p>
</footer>

<script>
// Carousel script (unchanged)
(function() {
  const track = document.querySelector('.carousel-track');
  const prev = document.querySelector('.carousel-btn.prev');
  const next = document.querySelector('.carousel-btn.next');
  const windowEl = document.querySelector('.carousel-window');
  const products = Array.from(track.children);

  function itemsPerView() {
    const w = windowEl.offsetWidth;
    if (w >= 1024) return 3;
    if (w >= 700) return 2;
    return 1;
  }

  let slideIndex = 0;

  function update() {
    const perView = itemsPerView();
    const shift = slideIndex * windowEl.offsetWidth;
    track.style.transform = `translateX(-${shift}px)`;
    prev.disabled = slideIndex <= 0;
    next.disabled = slideIndex >= Math.ceil(products.length / perView) - 1;
  }

  function nextSlide() {
    const perView = itemsPerView();
    slideIndex = Math.min(slideIndex + 1, Math.ceil(products.length / perView) - 1);
    update();
  }

  function prevSlide() {
    slideIndex = Math.max(slideIndex - 1, 0);
    update();
  }

  next.addEventListener('click', nextSlide);
  prev.addEventListener('click', prevSlide);
  window.addEventListener('resize', () => {
    slideIndex = Math.min(slideIndex, Math.ceil(products.length / itemsPerView()) - 1);
    update();
  });

  function layoutProducts() {
    const perView = itemsPerView();
    const gap = 18;
    const containerW = windowEl.offsetWidth;
    const cardW = (containerW - gap * (perView - 1)) / perView;
    products.forEach(p => p.style.flex = `0 0 ${cardW}px`);
  }

  window.addEventListener('load', () => { layoutProducts(); update(); });
  window.addEventListener('resize', () => { layoutProducts(); update(); });
})();
</script>

</body>
</html>
